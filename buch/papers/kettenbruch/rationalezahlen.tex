
%
% rationalezahlen.tex -- 
%
% (c) 2020 Benjamin Bouhars-Keller
%
\section{Rationale Zahlen
\label{kettenbruch:section:Zahlen}}
\rhead{Rationale Zahlen}
\subsection{endliche Kettenbrüche}
Die Kettenbruchentwicklung von $x \in \mathbb{R}$ bricht genau dann nach endlich
vielen Schritten ab, wenn $x$ rational ist.
Die Menge aller rationalen Zahlen wird mit $\mathbb{Q}$ bezeichnet.
Ein endlicher Kettenbruch ist ein Bruch der Form
\begin{equation}
a_0 + \cfrac{b_1}{a_1+\cfrac{b_2}{a_2+\cfrac{\cdots}{\cdots+\cfrac{b_n}{a_{n-1} + \cfrac{1}{a_n}}}}}
\end{equation}
in welchem $a_0, a_1,\dots,a_n$ und $b_1,b_2,\dots,b_n$ ganze Zahlen
darstellen, die mit Ausnahme möglicherweise von $a_0$ alle positiv sind.
Die Kettenbruchentwicklung von $x \in \mathbb{R}$ bricht genau dann
nach endlich vielen Schritten ab, wenn $x$ rational ist. So bilden
rationale Zahlen endliche Kettenbrüche.

\subsection{Euklidischer Algorithmus}
Die Umwandlung einer rationalen Zahl in einen Kettenbruch erfolgt
mit Hilfe des euklidischen Algorithmus.
Als Beispiel rechnen wir für $\frac{17}{10} = [1;1,2,3]$.
Jede rationale Zahl $x$ lässt sich auf eindeutige Weise in einen
endlichen Kettenbruch entwicklen, dessen letzer Teilnenner grösser
oder gleich 2 ist.
\begin{beispiel}
\begin{equation}
\frac{17}{10}
=
1 + \frac{7}{10}
=
1 + \cfrac{1}{\frac{10}{7}}
=
1 + \cfrac{1}{1+\frac{3}{7}}
=
1 + \cfrac{1}{1+\cfrac{1}{1+\cfrac{1}{\frac{7}{3}}}}
=
1 + \cfrac{1}{1+\cfrac{1}{2+\frac{1}{3}}}
\end{equation}
\begin{align*}
17 &= 1\cdot 10 + 7 \\
10 &= 1\cdot 7 + 3 \\
7 &= 2\cdot 3 + 1 \\
3 &= 3\cdot 1 + 0
\end{align*}
Diese Methode kann auch umgekehrt angewendet werden.
Berechnen wir nun den Kettenbruch in einem Bruch zurück.
\begin{equation}
[1;1,2,3] 	
\rightarrow Es gilt		2 + \frac{1}{3} = \frac{7}{3} \\
\rightarrow Es gilt		1 + \frac{3}{7} = \frac{10}{7} \\
\rightarrow Es gilt		1 + \frac{7}{10} = \frac{17}{0} \\
\end{equation}
\end{beispiel}
Wie man im Beispiel sieht, ist die intuitive Berechnung der
Näherungsbrüche eines Kettenbruchs, indem man ihn von unten her
auflöst, sehr umständlich. Durch ein rekursives Bildungsgesetz für
Zähler und Nenner kann man die Berechnung erheblich vereinfachen.
Ausserdem kann man mit Hilfe dieser Rekursionsformel die Grenzwerte
unendlicher Kettenbrüche untersuchen.

\subsection{Rekursionsformel}
Die Berechnung der Konvergenten (siehe Abschnitt 10.3.3) eines Kettenbruches 
kann erheblich vereinfacht werden, indem eine Rekursionsformeln für den Zähler 
und den Nenner eingeführt wird. Anders formuliert können Grenzwerte für unendliche 
Zahlen oder Funktionen mit Hilfe der Rekursionsformel schneller definiert werden.
Betrachten wir zunächst die folgende Näherungsbrüche:

\begin{align*}
a_0 + \frac{b_1}{a_1} , a_0 + \cfrac{b_1}{a_1 + \frac{b_2}{a_2}} , \cdots
\end{align*}
Wie in Kapitel 17.1.1 erwähnt wird hier der Nenner wieder als Kettenbruch dargestellt.
Insofern  werden Terme der Form
\begin{align*}
a_k + \cfrac{b_{k + 1}}{a_{k + 1} + \frac{p}{q}}
\end{align*}
immer ausgerechnet
\begin{align*}
\cfrac{b_{k+1}}{a_{k+1} + \frac{p}{q}} = \frac{b_{k+1} \cdot q}{a_{k+1} \cdot q + p}
\end{align*}
Dies lässt sich auch durch die folgende Matrizenschreibweise ausdrücken:
\begin{equation}
		\begin{pmatrix}
			\textrm{neuer Zähler}\\
			\textrm{neuer Nenner}
		\end{pmatrix}
 = 		\begin{pmatrix}
			b_{k+1} \cdot q\\
			a_{k+1} \cdot q + p
		\end{pmatrix}
		=\begin{pmatrix}
			0&	b_{k+1}\\
			1&	a_{k+1}
		\end{pmatrix}
		\begin{pmatrix}
		p \\
		q
		\end{pmatrix}
\end{equation}
Der ``unterste'' Bruch ist $\frac{b_n}{a_n}$, also in Vektorschreibweise
\begin{align*}
a_0 + 	\begin{pmatrix}
			0& b_1\\
			1& a_1
		\end{pmatrix}
		\cdots
		\begin{pmatrix}
			0& b_{n-1}\\
			1& a_{n-1}
		\end{pmatrix}
		\begin{pmatrix}
			b_n\\
			a_n
		\end{pmatrix}
\textrm{Aufbau ``von rechts nach links''}
\end{align*}
aber das Matrizenprodukt kann man auch von links beginnend ausmultiplizieren, als
\begin{align*}
		\begin{pmatrix}
			0& b_1\\
			1& a_1
		\end{pmatrix}
		\cdots
		\begin{pmatrix}
			0& b_{n-1}\\
			1& a_{n-1}
		\end{pmatrix}
		\begin{pmatrix}
			b_n\\
			a_n
		\end{pmatrix}
\end{align*}
d.h. man kann bei $b_1, a_1$ beginnen.
Man kann die beiden Schritten
\begin{align*}
\frac{p}{q} \rightarrow a_k + \frac{p}{q} \rightarrow \cfrac{b_k}{a_k + \frac{p}{q}}
\end{align*}
auch separat als Matrizen schreiben.
\begin{align*}
a_k + \frac{p}{q} = \frac{a_k \cdot q + p}{q} \enspace d.h. \enspace	
	\begin{pmatrix}
		1& a_k\\
		0& 1
	\end{pmatrix}
	\begin{pmatrix}
		p\\
		q
	\end{pmatrix}
\end{align*}
\begin{align*}
cfrac{b_k}{\frac{p}{q}} = \frac{b_k \cdot q}{p} \textrm{d.h.}	
	\begin{pmatrix}
		1& b_k\\
		0& 1
	\end{pmatrix}
	\begin{pmatrix}
		p\\
		q
	\end{pmatrix}
\end{align*}
Tatsächlich ist die Kombination der beiden Schritte
\begin{align*}
		\begin{pmatrix}
			0& b_n\\
			1& 0
		\end{pmatrix}
		\begin{pmatrix}
			1& a_n\\
			0& 1
		\end{pmatrix}
	=	\begin{pmatrix}
			0& b_n\\
			1& a_n
		\end{pmatrix}
\end{align*}
wie auf der vorangegangene Seite gefunden.
Aufbau des Kettenbruchs von rechts
\begin{align*}
		\begin{pmatrix}
			1& a_0\\
			0& 1
		\end{pmatrix}
		\begin{pmatrix}
			0& b_1\\
			1& a_1
		\end{pmatrix}
		\begin{pmatrix}
			0& b_2\\
			1& a_2
		\end{pmatrix}
		\cdots
		\begin{pmatrix}
			0& b_{n-1}\\
			1& a_{n-1}
		\end{pmatrix}
		\begin{pmatrix}
			b_n\\
			a_n
		\end{pmatrix}
\end{align*}
Aufbau des Kettenbruchs von links: Matrizen von links her ausmultiplizieren
Start:
\begin{align*}
		\begin{pmatrix}
			1& a_0\\
			0& 1
		\end{pmatrix}
	=	\begin{pmatrix}
			A_{-1}& A_0\\
			B_{-1}& B_0
		\end{pmatrix}
	=	P_0
\end{align*}
Schritt 1:
\begin{align*}
		\begin{pmatrix}
			1& a_0\\
			0& 1
		\end{pmatrix}
		\begin{pmatrix}
			1& b_1\\
			0& a_1
		\end{pmatrix}
	=	\begin{pmatrix}
			a_0& b_1 + a_0 \cdot a_1\\
			1&	a_1
		\end{pmatrix}\\
	=	\begin{pmatrix}
			A_{-1}& A_0\\
			B_{-1}& B_0
		\end{pmatrix}
		\begin{pmatrix}
			1& b_1\\
			0& a_1
		\end{pmatrix}
	=	\begin{pmatrix}
			A_0& A_1\\
			B_0& B_1
		\end{pmatrix}
	=	P_1
\end{align*}
Schritt 2:
\begin{align*}
P_1 \cdot	\begin{pmatrix}
				0& b_2\\
				1& a_2
			\end{pmatrix}\\
		=	\begin{pmatrix}
				A_0& A_1\\
				B_0& B_1
			\end{pmatrix}
			\begin{pmatrix}
				0& b_2\\
				1& a_2
			\end{pmatrix}
		=	\begin{pmatrix}
				A_1& b_2 \cdot A_0 + a_2 \cdot A_1\\
				B_1& b_2 \cdot B_0 + a_2 \cdot B_1
			\end{pmatrix}
		= 	P_2
\end{align*}
Schritt 3:
\begin{align*}
P_2 \cdot	\begin{pmatrix}
				0& b_3\\
				1& a_3
			\end{pmatrix}\\
		=	\begin{pmatrix}
				A_1& A_2\\
				B_1& B_2
			\end{pmatrix}
			\begin{pmatrix}
				0& b_3\\
				1& a_3
			\end{pmatrix}
		=	\begin{pmatrix}
				A_2& b_3 \cdot A_1 + a_3 \cdot A_2\\
				B_2& b_3 \cdot B_1 + a_3 \cdot B_2
			\end{pmatrix}
		= 	P_2
\end{align*}
So macht man weiter bis zum Schritt $n_1$, der die Matrix
\begin{align*}
P_{n-1} = 	\begin{pmatrix}
				A_{n-2}& A_{n-1}\\
				B_{n-2}& B_{n-1}			
			\end{pmatrix}
\end{align*}
liefert.\\
Zähler und Nenner des Näherungsbruchs bekommt man dann durch Multiplikation mit $\begin{pmatrix}
b_n\\
a_n
\end{pmatrix}$. Dies ist aber die zweite Spalte der Matrix $\begin{pmatrix}
0& b_n\\
1& a_n
\end{pmatrix}$, d.h., Zähler und Nenner stehen in der zweite Spalte von $P_n$.

\underline{Folgerung:}\\

$\frac{A_n}{B_n}$ ist der Wert von
\begin{align*}
a_0 + \cfrac{b_1}{a_1+\cfrac{b_2}{a_2+\cfrac{\cdots}{\cdots+\cfrac{b_{n-1}}{a_{n-1} + \cfrac{b_n}{a_n}}}}}
\end{align*}
Die Berechnung von $A_n, B_n$ kann man jetzt auch ohne die Matrizenschreibweise aufschreiben:
Start:
\begin{align*}
A_{-1} = 0		\qquad		A_0 = a_0 \\
B_{-1} = 1		\qquad		B_0 = 1 \\
\end{align*}
$\rightarrow$ 0-te Näherung: $\frac{A_0}{B_0} = a_0$
Schritt:
\begin{align*}
k \rightarrow k + 1 \\
A_{k+1} = A_{k-1} \cdot b_k + A_k \cdot a_k \\
B_{k+1} = B_{k-1} \cdot b_k + B_k \cdot a_k
\end{align*}
Näherungsbruch $n: \frac{A_n}{B_n}$

Schliesslich sind für reguläre oder einfache Kettenbrüche die Formeln einfacher, weil $b_k = 1$
und so:
\begin{align*}
A_{k+1} = A_{k-1} + A_k \cdot a_k \\
B_{k+1} = B_{k-1} + B_k \cdot a_k
\end{align*}
Hiermit haben wir die wichtigsten Zusammenhänge in Bezug auf die Näherungszahlen herausgearbeitet.
